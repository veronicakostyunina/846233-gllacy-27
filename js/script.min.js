var link=document.querySelector(".callback-form-button"),popup=document.querySelector(".modal-callback"),mask=document.querySelector(".modal-mask"),close=popup.querySelector(".modal-close"),form=popup.querySelector("form"),name=popup.querySelector("[name=callback-name]"),email=popup.querySelector("[name=callback-email]"),message=popup.querySelector("[name=callnack-message]"),storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email");link.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("show-modal"),mask.classList.add("visible"),storageName&&storageEmail&&(name.value=storageName,email.value=storageEmail)}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("show-modal"),mask.classList.remove("visible"),popup.classList.remove("error-modal")}),form.addEventListener("submit",function(e){e.preventDefault(),name.value&&email.value&&message.value?(localStorage.setItem("name",name.value),localStorage.setItem("email",email.value)):(e.preventDefault(),popup.classList.remove("error-modal"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("error-modal"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("show-modal")&&(popup.classList.remove("show-modal"),popup.classList.remove("error-modal"),mask.classList.remove("visible"))});
